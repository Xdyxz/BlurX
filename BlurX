-- BlurX [BETA]

getgenv().gethui = function() return game.CoreGui end

local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/Xdyxz/BlurX/refs/heads/main/Orion%20Library')))()
local Window = OrionLib:MakeWindow({Name = " BlurX [BETA]", HidePremium = false, SaveConfig = true, ConfigFolder = "BlurX"})

local Tab = Window:MakeTab({
	Name = "Home",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})
local Tab = Window:MakeTab({
	Name = "Player",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})
local Tab = Window:MakeTab({
	Name = "Target",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})
local Tab = Window:MakeTab({
	Name = "Visual",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})
local Tab = Window:MakeTab({
	Name = "Keybinds",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})
local Tab = Window:MakeTab({
	Name = "Loop",
	Icon = "rbxassetid://4483345998",
	PremiumOnly = false
})

OrionLib:Init()

task.wait(0)

local UserInputService = game:GetService("UserInputService")
local guiVisible = true -- track visibility

-- Find the Orion GUI in CoreGui (not OrionBliz)
local OrionGUI = game:GetService("CoreGui"):FindFirstChild("Orion")

if OrionGUI then
    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if gameProcessed then return end
        if input.KeyCode == Enum.KeyCode.M then
            guiVisible = not guiVisible
            OrionGUI.Enabled = guiVisible -- toggle visibility
        end
    end)
else
    warn("Orion GUI not found in CoreGui!")
end

-- Detect mobile
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local UserInputService = game:GetService("UserInputService")
local guiVisible = true

local OrionGUI = game:GetService("CoreGui"):FindFirstChild("Orion")
if not OrionGUI then
    warn("Orion GUI not found!")
    return
end

-- Function to toggle Orion visibility
local function toggleOrion()
    guiVisible = not guiVisible
    OrionGUI.Enabled = guiVisible
end

-- Only run if mobile
if UserInputService.TouchEnabled then
    -- Create ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "OrionToggleButton"
    screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")
    
    -- Create button frame
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Name = "ToggleButtonFrame"
    buttonFrame.Size = UDim2.new(0, 60, 0, 60)
    buttonFrame.Position = UDim2.new(0, 20, 0, 100)
    buttonFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45) -- dark background
    buttonFrame.BackgroundTransparency = 0
    buttonFrame.Parent = screenGui
    buttonFrame.Active = true
    buttonFrame.Draggable = true

    -- Add rounded corners
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = buttonFrame

    -- Add image
    local image = Instance.new("ImageLabel")
    image.Name = "Icon"
    image.Size = UDim2.new(0.8, 0, 0.8, 0)
    image.Position = UDim2.new(0.1, 0, 0.1, 0)
    image.Image = "rbxassetid://4483345998"
    image.BackgroundTransparency = 1
    image.Parent = buttonFrame

    -- Click detection
    local clickDetector = Instance.new("TextButton")
    clickDetector.Size = UDim2.new(1, 0, 1, 0)
    clickDetector.BackgroundTransparency = 1
    clickDetector.Text = ""
    clickDetector.Parent = buttonFrame
    clickDetector.MouseButton1Click:Connect(toggleOrion)
end
